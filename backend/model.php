<?php
    define ('__ROOT__', dirname(__FILE__));
    define ('__STATUS___', __FILE__ . '/data/status.json');
    
    if (!file_exists(__STATUS___))
        initializeStatus();
    
    // Current status object
    $status = json_decode(file_get_contents(__STATUS___));
    
    getStatus()
    {
        return $status;
    }
    
    setStatus($object)
    {
        file_put_contents(__STATUS__, json_encode($object, true));
    }
    
    getAttribute ($attribute)
    {
        return $status["$attribute"];
    }
    
    setAttribute ($attribute, $value)
    {
        $status["$attribute"] = $value;
        setStatus($status);
    }
    
    initializeStatus()
    {
        $default_status = array (
              "ip address" => null,
              "computer name" => null,
              "installation path" => null,
              "autorun" => null,
              "running" => null,
              "error" => null
        );
        
        setStatus($default_status);
    }   
?>