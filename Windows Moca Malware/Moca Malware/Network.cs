using System;

namespace Moca_Malware
{
    class Network
    {
        public static string httpGet(string address)
        {
            string textResponse = string.Empty;
            try
            {
                System.Net.WebRequest request = System.Net.WebRequest.Create(address);
                System.Net.WebResponse response = request.GetResponse();
                System.IO.StreamReader streamReader = new System.IO.StreamReader(response.GetResponseStream());
                textResponse = streamReader.ReadToEnd();
            }
            catch (Exception ex)
            {
                ErrorHandler.errorRaised(ex);
            }
            return textResponse;
        }

        public static string httpPost(string address, string parameters)
        {
            string textResponse = string.Empty;
            try
            {
                System.Net.WebRequest request = System.Net.WebRequest.Create(address);
                request.ContentType = "application/x-www-form-urlencoded";
                request.Method = "POST";
                byte[] bytes = System.Text.Encoding.ASCII.GetBytes(parameters);
                request.ContentLength = bytes.Length;

                System.IO.Stream os = request.GetRequestStream();
                os.Write(bytes, 0, bytes.Length);
                os.Close();

                System.Net.WebResponse response = request.GetResponse();
                System.IO.StreamReader streamReader = new System.IO.StreamReader(response.GetResponseStream());
                textResponse = streamReader.ReadToEnd();
            }
            catch (Exception ex)
            {
                ErrorHandler.errorRaised(ex);
            }
            return textResponse;
        }
    }
}
